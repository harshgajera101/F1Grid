{% extends "layout.html" %}
{% load static %}

{% block content %}

<!-- ================= HERO SECTION ================= -->
<section class="hero-grid">
  <div class="hero-content">
    <span class="hero-tag">ğŸ F1 FAN HUB</span>

    <h1 class="hero-title">
      The Grid <span>Never Sleeps</span>
    </h1>

    <p class="hero-subtitle">
      Opinions, polls, memes, and race reactions â€”
      <br />
      all from the heart of Formula 1.
    </p>

    <div class="hero-actions">
      <a href="{% url 'tweet_create' %}" class="btn-hero-primary">
        + Create a Post
      </a>
      <a href="#feed" class="btn-hero-secondary">
        Explore the Feed
      </a>
    </div>

    <div class="hero-stats">
      <div>
        <strong>24/7</strong>
        <span>Race Talk</span>
      </div>
      <div>
        <strong>Fans</strong>
        <span>Driven Community</span>
      </div>
      <div>
        <strong>Live</strong>
        <span>Polls & Reactions</span>
      </div>
    </div>
  </div>

  <div class="hero-visual">
    <img src="{% static 'images/f1-car1.png' %}" alt="F1 Car">
  </div>
</section>


<!-- ================= RACE WEEKEND STRIP ================= -->
<div class="race-weekend-strip">
  <div class="race-left">
    <span class="race-badge live">LIVE</span>
    <h3>Australian Grand Prix</h3>
    <p> Melbourne â€¢ Race Weekend Discussion</p>
  </div>

  <div class="race-right">
    <span class="race-time">Sunday â€¢ 9:00 AM IST</span>
  </div>
</div>


<!-- ================= FEED ================= -->
<section class="main-layout">

  <!-- FEED -->
  <div class="feed-column">
    
    <!-- WORKING FILTER FORM -->
    <form method="get" action="{% url 'tweet_list' %}" class="feed-filter-bar" id="filterForm">
      <span class="filter-label">Filter: </span>

      <!-- POST TYPE FILTER -->
      <select name="type" class="filter-select" onchange="document.getElementById('filterForm').submit()">
        <option value="">All Posts</option>
        {% for code, label in post_types %}
          <option value="{{ code }}" {% if request.GET.type == code %}selected{% endif %}>
            {{ label }}
          </option>
        {% endfor %}
      </select>

      <!-- TEAM FILTER -->
      <select name="team" class="filter-select" onchange="document.getElementById('filterForm').submit()">
        <option value="">All Teams</option>
        {% for team in teams %}
          <option value="{{ team.id }}" {% if request.GET.team == team.id|stringformat:"s" %}selected{% endif %}>
            {{ team.name }}
          </option>
        {% endfor %}
      </select>

      <!-- DRIVER FILTER -->
      <select name="driver" class="filter-select" onchange="document.getElementById('filterForm').submit()">
        <option value="">All Drivers</option>
        {% for driver in drivers %}
          <option value="{{ driver.id }}" {% if request.GET.driver == driver.id|stringformat:"s" %}selected{% endif %}>
            {{ driver.name }}
          </option>
        {% endfor %}
      </select>

      <!-- CLEAR FILTERS BUTTON -->
      {% if request.GET.type or request.GET.team or request.GET.driver %}
        <a href="{% url 'tweet_list' %}" class="btn-clear-filter">Clear</a>
      {% endif %}
    </form>

    <!-- POSTS -->
    {% if tweets %}
      {% for tweet in tweets %}
        {% include "tweet/components/post_card.html" %}
      {% endfor %}
    {% else %}
      <div class="post-card">
        <p style="text-align: center; color: var(--text-muted);">
          No posts found matching your filters.
        </p>
      </div>
    {% endif %}

  </div>

  <!-- SIDEBAR -->
  <aside class="sidebar">
    
    <!-- RACE WEEKEND CARD -->
    <div class="sidebar-card">
      <h4>ğŸ Race Weekend</h4>
      <p class="sidebar-muted">Next GP</p>
      <strong>Australian Grand Prix</strong>
      <span class="race-status live">LIVE</span>
    </div>

    <!-- TRENDING DRIVERS -->
    <div class="sidebar-card">
      <h4>ğŸ”¥ Trending Drivers</h4>
      <ul class="sidebar-list">
        <li>ğŸ‡¬ğŸ‡§ Lando Norris</li>
        <li>ğŸ‡³ğŸ‡± Max Verstappen</li>
        <li>ğŸ‡¦ğŸ‡º Oscar Piastri</li>
        <li>ğŸ‡²ğŸ‡¨ Charles Leclerc</li>
        <li>ğŸ‡¬ğŸ‡§ Lewis Hamilton</li>
      </ul>
    </div>

    <!-- QUICK STATS -->
    <div class="sidebar-card">
      <h4>âš¡ Quick Stats</h4>
      <ul class="sidebar-list">
        <li>Races Left: 0</li>
        <li>Active Posts: {{ tweets.count }}</li>
        <li>Total Teams: {{ teams.count }}</li>
        <li>Total Drivers: {{ drivers.count }}</li>
      </ul>
    </div>

    <!-- CHAMPIONSHIP STANDINGS -->
    <div class="sidebar-card">
      <h4>ğŸ† Drivers' Championship</h4>
      <ul class="sidebar-list">
        <li>1. L. Norris - 423 pts</li>
        <li>2. M. Verstappen - 421 pts</li>
        <li>3. O. Piastri - 410 pts</li>
        <li>4. G. Russell - 319 pts</li>
        <li>5. C. Leclerc - 242 pts</li>
      </ul>
    </div>

    <!-- CONSTRUCTORS -->
    <div class="sidebar-card">
      <h4>ğŸ Constructors</h4>
      <ul class="sidebar-list">
        <li>1. McLaren - 833 pts</li>
        <li>2. Mercedes - 469 pts</li>
        <li>3. Red Bull - 451 pts</li>
        <li>4. Ferrari - 398 pts</li>
        <li>5. Williams - 137 pts</li>
      </ul>
    </div>

    <!-- ACTIVE POLLS -->
    <div class="sidebar-card">
      <h4>ğŸ“Š Hot Topics</h4>
      <ul class="sidebar-list">
        <li>ğŸ—³ï¸ Who wins the title?</li>
        <li>ğŸï¸ Best team strategy?</li>
        <li>ğŸ’¨ Fastest qualifier?</li>
        <li>ğŸ† Driver of the year?</li>
      </ul>
    </div>

  </aside>

</section>

{% endblock %}